<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#2c3e50">Car Rental Management System - Database Schema</text>
  
  <!-- rental_company table -->
  <g id="rental_company">
    <rect x="50" y="80" width="200" height="180" fill="#e8f4f8" stroke="#2980b9" stroke-width="2" rx="5"/>
    <text x="150" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#2980b9">rental_company</text>
    <line x1="50" y1="105" x2="250" y2="105" stroke="#2980b9" stroke-width="1"/>
    <text x="60" y="125" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”‘ id (BIGINT) PK</text>
    <text x="60" y="140" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">name (VARCHAR(120)) UK</text>
    <text x="60" y="155" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">version (BIGINT)</text>
    <text x="60" y="170" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">deleted (BOOLEAN)</text>
    <text x="60" y="185" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">deleted_at (TIMESTAMP)</text>
    <text x="60" y="200" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">created_date (TIMESTAMP)</text>
    <text x="60" y="215" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">updated_date (TIMESTAMP)</text>
    <text x="60" y="230" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">created_by (VARCHAR(100))</text>
    <text x="60" y="245" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">updated_by (VARCHAR(100))</text>
  </g>

  <!-- rental_location table -->
  <g id="rental_location">
    <rect x="320" y="80" width="200" height="200" fill="#e8f8e8" stroke="#27ae60" stroke-width="2" rx="5"/>
    <text x="420" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#27ae60">rental_location</text>
    <line x1="320" y1="105" x2="520" y2="105" stroke="#27ae60" stroke-width="1"/>
    <text x="330" y="125" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”‘ id (BIGINT) PK</text>
    <text x="330" y="140" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”— company_id (BIGINT) FK</text>
    <text x="330" y="155" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">name (VARCHAR(120))</text>
    <text x="330" y="170" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">city (VARCHAR(120))</text>
    <text x="330" y="185" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">country (VARCHAR(120))</text>
    <text x="330" y="200" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">version (BIGINT)</text>
    <text x="330" y="215" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">deleted (BOOLEAN)</text>
    <text x="330" y="230" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">deleted_at (TIMESTAMP)</text>
    <text x="330" y="245" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">audit fields...</text>
  </g>

  <!-- car_model table -->
  <g id="car_model">
    <rect x="590" y="80" width="200" height="160" fill="#f8e8f8" stroke="#8e44ad" stroke-width="2" rx="5"/>
    <text x="690" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#8e44ad">car_model</text>
    <line x1="590" y1="105" x2="790" y2="105" stroke="#8e44ad" stroke-width="1"/>
    <text x="600" y="125" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”‘ id (BIGINT) PK</text>
    <text x="600" y="140" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">make (VARCHAR(80))</text>
    <text x="600" y="155" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">model (VARCHAR(80))</text>
    <text x="600" y="170" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">vehicle_class (VARCHAR(40))</text>
    <text x="600" y="185" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">seats (INT)</text>
    <text x="600" y="200" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">audit fields...</text>
    <text x="600" y="220" font-family="Arial, sans-serif" font-size="10" fill="#8e44ad">UK: (make, model)</text>
  </g>

  <!-- client table -->
  <g id="client">
    <rect x="860" y="80" width="200" height="140" fill="#f8f8e8" stroke="#f39c12" stroke-width="2" rx="5"/>
    <text x="960" y="100" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#f39c12">client</text>
    <line x1="860" y1="105" x2="1060" y2="105" stroke="#f39c12" stroke-width="1"/>
    <text x="870" y="125" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”‘ id (BIGINT) PK</text>
    <text x="870" y="140" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">email (VARCHAR(160)) UK</text>
    <text x="870" y="155" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">full_name (VARCHAR(160))</text>
    <text x="870" y="170" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">driver_license_no (VARCHAR(40))</text>
    <text x="870" y="185" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">audit fields...</text>
  </g>

  <!-- car table -->
  <g id="car">
    <rect x="50" y="320" width="220" height="220" fill="#f0f8ff" stroke="#3498db" stroke-width="2" rx="5"/>
    <text x="160" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#3498db">car</text>
    <line x1="50" y1="345" x2="270" y2="345" stroke="#3498db" stroke-width="1"/>
    <text x="60" y="365" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”‘ id (BIGINT) PK</text>
    <text x="60" y="380" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”— company_id (BIGINT) FK</text>
    <text x="60" y="395" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”— model_id (BIGINT) FK</text>
    <text x="60" y="410" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”— current_location_id (BIGINT) FK</text>
    <text x="60" y="425" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">vin (VARCHAR(64)) UK</text>
    <text x="60" y="440" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">plate_number (VARCHAR(32)) UK</text>
    <text x="60" y="455" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">mileage_km (INT)</text>
    <text x="60" y="470" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">daily_price_in_cents (INT)</text>
    <text x="60" y="485" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">status (VARCHAR(32))</text>
    <text x="60" y="500" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">version (BIGINT)</text>
    <text x="60" y="515" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">deleted (BOOLEAN)</text>
    <text x="60" y="530" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">audit fields...</text>
  </g>

  <!-- booking table -->
  <g id="booking">
    <rect x="350" y="320" width="220" height="220" fill="#fff8e8" stroke="#e67e22" stroke-width="2" rx="5"/>
    <text x="460" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#e67e22">booking</text>
    <line x1="350" y1="345" x2="570" y2="345" stroke="#e67e22" stroke-width="1"/>
    <text x="360" y="365" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”‘ id (BIGINT) PK</text>
    <text x="360" y="380" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”— client_id (BIGINT) FK</text>
    <text x="360" y="395" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”— car_id (BIGINT) FK</text>
    <text x="360" y="410" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”— pickup_location_id (BIGINT) FK</text>
    <text x="360" y="425" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”— return_location_id (BIGINT) FK</text>
    <text x="360" y="440" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">pickup_time (TIMESTAMP)</text>
    <text x="360" y="455" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">return_time (TIMESTAMP)</text>
    <text x="360" y="470" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">status (VARCHAR(32))</text>
    <text x="360" y="485" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">total_price_cents (INT)</text>
    <text x="360" y="500" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">version (BIGINT)</text>
    <text x="360" y="515" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">audit fields...</text>
  </g>

  <!-- payment table -->
  <g id="payment">
    <rect x="650" y="320" width="200" height="160" fill="#ffe8e8" stroke="#e74c3c" stroke-width="2" rx="5"/>
    <text x="750" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#e74c3c">payment</text>
    <line x1="650" y1="345" x2="850" y2="345" stroke="#e74c3c" stroke-width="1"/>
    <text x="660" y="365" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”‘ id (BIGINT) PK</text>
    <text x="660" y="380" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”— booking_id (BIGINT) FK UK</text>
    <text x="660" y="395" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">amount_cents (INT)</text>
    <text x="660" y="410" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">status (VARCHAR(32))</text>
    <text x="660" y="425" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">provider_reference (VARCHAR(100))</text>
    <text x="660" y="440" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">audit fields...</text>
  </g>

  <!-- outbox_events table -->
  <g id="outbox_events">
    <rect x="920" y="320" width="220" height="200" fill="#f0f0f8" stroke="#6c5ce7" stroke-width="2" rx="5"/>
    <text x="1030" y="340" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#6c5ce7">outbox_events</text>
    <line x1="920" y1="345" x2="1140" y2="345" stroke="#6c5ce7" stroke-width="1"/>
    <text x="930" y="365" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">ðŸ”‘ id (BIGINT) PK</text>
    <text x="930" y="380" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">aggregate_id (VARCHAR(100))</text>
    <text x="930" y="395" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">aggregate_type (VARCHAR(50))</text>
    <text x="930" y="410" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">event_type (VARCHAR(50))</text>
    <text x="930" y="425" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">event_data (TEXT)</text>
    <text x="930" y="440" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">status (VARCHAR(20))</text>
    <text x="930" y="455" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">processed_at (TIMESTAMP)</text>
    <text x="930" y="470" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">retry_count (INT)</text>
    <text x="930" y="485" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">error_message (TEXT)</text>
    <text x="930" y="500" font-family="Arial, sans-serif" font-size="11" fill="#2c3e50">audit fields...</text>
  </g>

  <!-- Relationships -->
  <!-- rental_company to rental_location -->
  <line x1="250" y1="140" x2="320" y2="140" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="285" y="135" font-family="Arial, sans-serif" font-size="9" fill="#666">1:N</text>

  <!-- rental_company to car -->
  <line x1="150" y1="260" x2="150" y2="320" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="155" y="290" font-family="Arial, sans-serif" font-size="9" fill="#666">1:N</text>

  <!-- car_model to car -->
  <path d="M 650 160 Q 600 160 600 280 Q 600 380 270 380" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="550" y="155" font-family="Arial, sans-serif" font-size="9" fill="#666">1:N</text>

  <!-- rental_location to car -->
  <path d="M 420 280 Q 420 300 350 380" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="385" y="295" font-family="Arial, sans-serif" font-size="9" fill="#666">1:N</text>

  <!-- client to booking -->
  <path d="M 860 180 Q 800 180 800 380 Q 800 380 570 380" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="800" y="175" font-family="Arial, sans-serif" font-size="9" fill="#666">1:N</text>

  <!-- car to booking -->
  <line x1="270" y1="430" x2="350" y2="430" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="310" y="425" font-family="Arial, sans-serif" font-size="9" fill="#666">1:N</text>

  <!-- rental_location to booking (pickup) -->
  <path d="M 420 280 Q 420 300 460 320" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="435" y="295" font-family="Arial, sans-serif" font-size="9" fill="#666">pickup</text>

  <!-- booking to payment -->
  <line x1="570" y1="380" x2="650" y2="380" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="610" y="375" font-family="Arial, sans-serif" font-size="9" fill="#666">1:1</text>

  <!-- Legend -->
  <g id="legend">
    <rect x="50" y="600" width="300" height="120" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1" rx="5"/>
    <text x="200" y="620" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#495057">Legend</text>
    <text x="60" y="640" font-family="Arial, sans-serif" font-size="11" fill="#495057">ðŸ”‘ Primary Key (PK)</text>
    <text x="60" y="655" font-family="Arial, sans-serif" font-size="11" fill="#495057">ðŸ”— Foreign Key (FK)</text>
    <text x="60" y="670" font-family="Arial, sans-serif" font-size="11" fill="#495057">UK = Unique Key</text>
    <text x="60" y="685" font-family="Arial, sans-serif" font-size="11" fill="#495057">1:N = One-to-Many relationship</text>
    <text x="60" y="700" font-family="Arial, sans-serif" font-size="11" fill="#495057">1:1 = One-to-One relationship</text>
  </g>

  <!-- Notes -->
  <g id="notes">
    <rect x="400" y="600" width="700" height="120" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1" rx="5"/>
    <text x="750" y="620" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#495057">Key Features</text>
    <text x="410" y="640" font-family="Arial, sans-serif" font-size="11" fill="#495057">â€¢ Soft Delete Pattern: deleted/deleted_at fields for audit trail</text>
    <text x="410" y="655" font-family="Arial, sans-serif" font-size="11" fill="#495057">â€¢ Optimistic Locking: version fields for concurrent updates</text>
    <text x="410" y="670" font-family="Arial, sans-serif" font-size="11" fill="#495057">â€¢ Audit Trail: created_date, updated_date, created_by, updated_by</text>
    <text x="410" y="685" font-family="Arial, sans-serif" font-size="11" fill="#495057">â€¢ Event Sourcing: outbox_events for reliable event publishing</text>
    <text x="410" y="700" font-family="Arial, sans-serif" font-size="11" fill="#495057">â€¢ Price in Cents: Avoiding floating-point precision issues</text>
  </g>

  <!-- Footer -->
  <text x="600" y="760" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#6c757d">Generated for Car Rental Management System v1.0</text>
</svg>